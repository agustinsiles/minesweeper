<div class="app-container">
    <h1>Minesweeper Test</h1>
    <div 
        class="game-setup-container"
        *ngIf="!activeGame; else gameContainer">
        <form 
            [formGroup]="gameSetupForm"
            (ngSubmit)="onSetupSubmit()">
            <label for="columns">
                Qty. columns
                <input 
                    id="columns"
                    type="number" 
                    formControlName="columns"
                    [ngClass]="{ 'is-invalid': submitted && f.columns.errors }">
            </label>
            <label for="rows">
                Qty. rows
                <input 
                    id="rows"
                    type="number" 
                    formControlName="rows"
                    [ngClass]="{ 'is-invalid': submitted && f.rows.errors }">
            </label>
            <label for="mines">
                Qty. mines
                <input 
                    id="mines"
                    type="number"  
                    formControlName="mines"
                    [ngClass]="{ 'is-invalid': submitted && f.mines.errors }">
            </label>
            <br>
            <label for="useDefaultValues">
                <input 
                    id="useDefaultValues"
                    type="checkbox"
                    (change)="onCheckboxChange()"           
                    formControlName="useDefaultValues"> Use default values
            </label>
            <br>
            <button>Start Game</button>
        </form>
    
        <div *ngIf="archivedGames && archivedGames.length">
            <h3>My game history</h3>
        
            <ul>
                <li *ngFor="let game of archivedGames;">
                    {{ game.date | date }} - {{ game.status }}. Time spent: {{ game.timeSpent }} seconds.
                    <button 
                        (click)="activeGame = game"
                        *ngIf="game.status === 'IN PROGRESS'">Resume
                    </button>
                </li>
            </ul>
        </div>
    </div>
    
    <ng-template #gameContainer>
        <div class="app-game-container">
            <div class="app-game-menu">
                <h4>You've been playing for {{ timer }} seconds..</h4>
                <button (click)="startNewGame()">Start new game</button>
            </div>
            
            <minesweeper-table 
                [game]="activeGame"
                (onGameEnd)="endGame()">
            </minesweeper-table>
        
            <h4 *ngIf="gameStatusNotification">{{ gameStatusNotification }}</h4>
        </div>
    </ng-template>
</div>
